!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var n=e();for(var r in n)("object"==typeof exports?exports:t)[r]=n[r]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,r){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:r})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(r=(s=u.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&u.return&&u.return()}finally{if(o)throw i}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u={onError:"tokenize"};e.TinyLex=function(){function t(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;o(this,t),this._code=e||"",this._rules=n||[],this._start=0,this._tokens=[],this._onToken=function(){return null},this._errorAction=r.onError}return s(t,[{key:"onToken",value:function(t){return this._onToken=t,this}},{key:"done",value:function(){return!this._code||this._start>=this._code.length}},{key:"lex",value:function(){if(this.done())throw new Error("lexer is consumed");for(;!this.done();){var t=this._scan();if(t){var e=this._onToken(t,this._lastMatch);return e||t}}var n=["EOF","EOF"],r=this._onToken(n,null);return this._destroy(),r||n}},{key:"tokenize",value:function(){return[].concat(r(this))}},{key:"_scan",value:function(){for(;!this._tokens.length&&this._start<this._code.length;){var t=this._code.slice(this._start),e=(this._rules.length,this._testRuleSet(t)),n=i(e,2),r=n[0],o=n[1];if(o){if(this._lastMatch=o,!this._handleMatch(r,o,t))return null}else this._handleError(t)}if(this._tokens.length)return this._tokens.pop()}},{key:"next",value:function(){var t=this;return{next:function(){return{done:t.done(),value:!t.done()&&t.lex()}}}}},{key:Symbol.iterator,value:function(){return this.next()}},{key:"_testRuleSet",value:function(t){for(var e=this._rules.length,n=0;n<e;n++){var r=this._rules[n],o=r[0].exec(t);if(o)return[r,o]}return[null,null]}},{key:"_handleMatch",value:function(t,e,n){var r=[],o=t[1];if("string"==typeof o)r.push([o,null!=e[1]?e[1]:e[0]]),this._start+=e[0].length;else if("number"==typeof o){var i=e[o];r.push([i.toLocaleUpperCase(),i]),this._start+=e[0].length}else if("function"==typeof o){var s=o.call(this,e,r,n),u=e[0].length;this._start+="number"==typeof s?Math.floor(Math.abs(s))||u:u}else if(null==o)return this._start+=e[0].length,!1;return this._tokens=this._tokens.concat(r.reverse()),!!r.length}},{key:"_handleError",value:function(t){switch(this._errorAction){case"throw":throw new Error(this._getErrorStr(t));case"ignore":this._start+=1;break;default:this._tokenizeChar(t)}}},{key:"_tokenizeChar",value:function(t){var e=t.slice(0,1);this._tokens.push([e.toLocaleUpperCase(),e]),this._start+=1}},{key:"_getErrorStr",value:function(t){return"lex error:"+this._lineAndCol()+'\n  match not found for chunk: "'+t.replace(/\s+/g," ").slice(0,32)+'..."'}},{key:"_lineAndCol",value:function(){var t=this._code.slice(0,this._start).split("\n"),e=t[t.length-1].length+1;return t.length+":"+e}},{key:"_destroy",value:function(){this._code=this._rules=this._tokens=this._onToken=this._lastMatch=null}}]),t}()}])});