!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{var r=e();for(var n in r)("object"==typeof exports?exports:t)[n]=r[n]}}("undefined"!=typeof self?self:this,function(){return function(t){function e(n){if(r[n])return r[n].exports;var o=r[n]={i:n,l:!1,exports:{}};return t[n].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var r={};return e.m=t,e.c=r,e.d=function(t,r,n){e.o(t,r)||Object.defineProperty(t,r,{configurable:!1,enumerable:!0,get:n})},e.n=function(t){var r=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(r,"a",r),r},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=0)}([function(t,e,r){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,r=Array(t.length);e<t.length;e++)r[e]=t[e];return r}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){var r=[],n=!0,o=!1,i=void 0;try{for(var s,u=t[Symbol.iterator]();!(n=(s=u.next()).done)&&(r.push(s.value),!e||r.length!==e);n=!0);}catch(t){o=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(o)throw i}}return r}return function(e,r){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),s=function(){function t(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,r,n){return r&&t(e.prototype,r),n&&t(e,n),e}}(),u={onError:"tokenize"};e.TinyLex=function(){function t(e,r){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u;if(o(this,t),!Array.isArray(r))throw new Error("Invalid ruleset: rules must be a non-zero length array");this._code=e,this._rules=r,this._start=0,this._tokens=[],this._onToken=function(){return null},this._errorAction=n.onError}return s(t,[{key:"onToken",value:function(t){return this._onToken=t,this}},{key:"done",value:function(){return!this._code||this._start>=this._code.length}},{key:"lex",value:function(){if(this.done())throw new Error("lexer is consumed");for(;!this.done();){var t=this._scan();if(t){var e=this._onToken(t,this._lastMatch);return e||t}}var r=["EOF","EOF"],n=this._onToken(r,null);return this._destroy(),n||r}},{key:"tokenize",value:function(){return[].concat(n(this))}},{key:"_scan",value:function(){for(;!this._tokens.length&&this._start<this._code.length;){var t=this._code.slice(this._start),e=(this._rules.length,this._testRuleSet(t)),r=i(e,2),n=r[0],o=r[1];if(o){if(this._lastMatch=o,!this._handleMatch(n,o,t))return null}else this._handleError(t)}if(this._tokens.length)return this._tokens.pop()}},{key:"next",value:function(){var t=this;return{next:function(){return{done:t.done(),value:!t.done()&&t.lex()}}}}},{key:Symbol.iterator,value:function(){return this.next()}},{key:"_testRuleSet",value:function(t){for(var e=this._rules.length,r=0;r<e;r++){var n=this._rules[r],o=n[0].exec(t);if(o)return[n,o]}return[null,null]}},{key:"_handleMatch",value:function(t,e,r){var n=[],o=t[1];if("string"==typeof o)n.push([o,null!=e[1]?e[1]:e[0]]),this._start+=e[0].length;else if("number"==typeof o){var i=e[o];n.push([i.toLocaleUpperCase(),i]),this._start+=e[0].length}else if("function"==typeof o){var s=o(e,n,r),u=e[0].length;this._start+="number"==typeof s?Math.floor(Math.abs(s))||u:u}else if(null==o)return this._start+=e[0].length,!1;return this._tokens=this._tokens.concat(n.reverse()),!!n.length}},{key:"_handleError",value:function(t){switch(this._errorAction){case"throw":throw new Error(this._getErrorStr(t));case"ignore":this._start+=1;break;default:this._tokenizeChar(t)}}},{key:"_tokenizeChar",value:function(t){var e=t.slice(0,1);this._tokens.push([e.toLocaleUpperCase(),e]),this._start+=1}},{key:"_getErrorStr",value:function(t){return"lex error:"+this._lineAndCol()+'\n  match not found for chunk: "'+t.replace(/\s+/g," ").slice(0,32)+'..."'}},{key:"_lineAndCol",value:function(){var t=this._code.slice(0,this._start).split("\n"),e=t[t.length-1].length+1;return t.length+":"+e}},{key:"_destroy",value:function(){this._code=this._rules=this._tokens=this._onToken=this._lastMatch=null}}]),t}()}])});